{"version":3,"sources":["../src/commands/hello.ts","../package.json","../src/types/schema.ts","../src/utils/commandsPath.ts","../src/commands/e.ts","../src/index.ts"],"names":["helloCommand","Command","opts","helloHandler","options","package_default","CommandSchema","z","CommandBodySchema","RegistrySchema","commandsPath","path","os","executeCommand","name","extras","executeHandler","environment","select","findCommand","findLocalCommand","cliOptions","searchCommandSpinner","ora","cliSpinners","resolve","filePath","raw","readFile","parsedCommand","file","selectedVersion","cmd","baseCliArgs","knownOptions","parsed","parseExtras","existingFlags","item","filledArgs","placeholders","arg","isPlaceholder","defaults","placeholder","label","value","input","cmdCliArgs","option","primaryOption","commandSpinner","mergedArgs","execa","error","flags","unknownTokens","positionals","i","token","next","hasValue","main","program"],"mappings":"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","file":"index.js","sourcesContent":["import { Command } from \"commander\";\r\n\r\nexport const helloCommand = new Command(\"hello\")\r\n  .description(\"Say hello to the user!\")\r\n  .option(\"-n, --name <name>\", \"Name to greet\", \"World\")\r\n  .action((opts) => helloHandler(opts));\r\n\r\nexport async function helloHandler(options: { name?: string }) {\r\n  console.log(`Hello, ${options.name}`);\r\n}\r\n","{\n  \"name\": \"@talos-org/cli\",\n  \"version\": \"0.1.16\",\n  \"description\": \"\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"sergiocortes-dll\",\n    \"url\": \"https://x.com/sergiocortes-dll\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/Vandlee/talos-cli.git\"\n  },\n  \"keywords\": [],\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"default\": \"./dist/index.js\"\n    }\n  },\n  \"bin\": {\n    \"talos\": \"./dist/index.js\"\n  },\n  \"scripts\": {\n    \"talos\": \"pnpm start:dev\",\n    \"dev\": \"tsup --watch\",\n    \"build\": \"tsup\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"start\": \"node dist/index.js\",\n    \"start:dev\": \"node dist/index.js\",\n    \"pub:beta\": \"pnpm build && pnpm publish --no-git-checks --access public --tag beta\",\n    \"pub:next\": \"pnpm build && pnpm publish --no-git-checks --access public --tag next\",\n    \"pub:release\": \"pnpm build && pnpm publish --access public\",\n    \"test\": \"vitest run\"\n  },\n  \"packageManager\": \"pnpm@10.28.2\",\n  \"dependencies\": {\n    \"@inquirer/prompts\": \"^8.2.0\",\n    \"chalk\": \"^5.6.2\",\n    \"cli-spinners\": \"^3.4.0\",\n    \"commander\": \"^14.0.3\",\n    \"dotenv\": \"^17.2.4\",\n    \"execa\": \"^9.6.1\",\n    \"ora\": \"^9.3.0\",\n    \"pino\": \"^10.3.0\",\n    \"vite-tsconfig-paths\": \"^6.0.5\",\n    \"zod\": \"^4.3.6\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^25.2.1\",\n    \"eslint\": \"^10.0.0\",\n    \"prettier\": \"^3.8.1\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"tsup\": \"^8.5.1\",\n    \"tsx\": \"^4.21.0\",\n    \"typescript\": \"^5.9.3\",\n    \"vitest\": \"^4.0.18\"\n  }\n}\n","import z from \"zod\";\r\n\r\nexport const CommandSchema = z.object({\r\n  name: z.string(),\r\n  options: z.array(z.string()),\r\n  args: z.array(z.string()),\r\n  action: z.string(),\r\n});\r\n\r\nexport const CommandBodySchema = z.object({\r\n  version: z.string(),\r\n  commands: z.array(CommandSchema),\r\n});\r\n\r\nexport const RegistrySchema = z.object({\r\n  name: z.string(),\r\n  body: z.array(CommandBodySchema),\r\n});\r\n\r\nexport type Command = z.infer<typeof CommandSchema>;\r\nexport type CommandBody = z.infer<typeof CommandBodySchema>;\r\nexport type registrySchema = z.infer<typeof RegistrySchema>;\r\n","import os from \"os\";\r\nimport path from \"path\";\r\n\r\nexport const commandsPath = path.join(\r\n  os.homedir(),\r\n  \"Documents\",\r\n  \"talos\",\r\n  \"commands\",\r\n);\r\n","import { input, select } from \"@inquirer/prompts\";\r\nimport cliSpinners from \"cli-spinners\";\r\nimport { Command } from \"commander\";\r\nimport { execa } from \"execa\";\r\nimport { readFile } from \"fs/promises\";\r\nimport ora from \"ora\";\r\nimport path from \"path\";\r\nimport { RegistrySchema } from \"../types/schema\";\r\nimport { commandsPath } from \"../utils/commandsPath\";\r\n\r\nexport const executeCommand = new Command(\"e\")\r\n  .description(\"Execute a command\")\r\n  .argument(\"<name>\", \"Name of the command\")\r\n  .argument(\"[extras...]\", \"Additional arguments and options\")\r\n  .allowUnknownOption()\r\n  .passThroughOptions()\r\n  .action((name, extras, opts) => executeHandler(name, opts, extras));\r\n\r\nexport async function executeHandler(\r\n  name: string,\r\n  options: any,\r\n  extras?: string[],\r\n) {\r\n  const environment = await select({\r\n    message: \"Where does Talos need to look for the command?\",\r\n    choices: [\r\n      { name: \"Local\", value: \"local\" },\r\n      { name: \"Internet\", value: \"internet\" },\r\n    ],\r\n  });\r\n\r\n  await findCommand(name, environment, { ...options, extras });\r\n}\r\n\r\nasync function findCommand(name: string, environment: string, options: any) {\r\n  if (environment === \"local\") {\r\n    await findLocalCommand(name, options);\r\n  } else if (environment === \"internet\") {\r\n    console.log(`Looking for ${name} on the internet...`);\r\n    // Implement internet command lookup logic here\r\n  }\r\n}\r\n\r\nasync function findLocalCommand(name: string, cliOptions: any = {}) {\r\n  const searchCommandSpinner = ora({\r\n    text: \"Looking for command locally...\",\r\n    spinner: {\r\n      frames: cliSpinners.circleHalves.frames,\r\n      interval: 80,\r\n    },\r\n  }).start();\r\n\r\n  await new Promise((resolve) => setTimeout(resolve, 1000)); // Simulate async operation\r\n\r\n  const filePath = path.join(commandsPath, `${name}.json`);\r\n\r\n  const raw = await readFile(filePath, \"utf-8\");\r\n  const parsedCommand = JSON.parse(raw);\r\n\r\n  const file = RegistrySchema.parse(parsedCommand);\r\n\r\n  if (!file) {\r\n    searchCommandSpinner.fail(\"Command not found locally.\");\r\n    return;\r\n  }\r\n\r\n  searchCommandSpinner.succeed(\"Command found locally.\");\r\n\r\n  if (file.body.length <= 0) {\r\n    searchCommandSpinner.fail(\"No versions found for this command.\");\r\n    return;\r\n  }\r\n\r\n  let selectedVersion = file.body[0]; // Default to the first version\r\n\r\n  if (file.body.length > 1) {\r\n    const version = await select({\r\n      message: \"Select a command version to execute:\",\r\n      choices: file.body.map((cmd) => ({ name: cmd.version, value: cmd })),\r\n    });\r\n\r\n    selectedVersion = version || selectedVersion;\r\n  }\r\n\r\n  // Build CLI args from extras while prompting for missing values defined in the registry.\r\n  const baseCliArgs: string[] = [];\r\n  const extras = Array.isArray(cliOptions.extras) ? cliOptions.extras : [];\r\n\r\n  const knownOptions = new Set(\r\n    selectedVersion.commands.flatMap((cmd) => cmd.options),\r\n  );\r\n  const parsed = parseExtras(extras, knownOptions);\r\n\r\n  // Preserve provided flags, unknown flags, and positional args as-is.\r\n  const existingFlags = new Set(parsed.flags.map((item) => item.flag));\r\n  for (const item of parsed.flags) {\r\n    baseCliArgs.push(item.flag);\r\n    if (item.value !== null) {\r\n      baseCliArgs.push(item.value);\r\n    }\r\n  }\r\n  baseCliArgs.push(...parsed.unknownTokens);\r\n  baseCliArgs.push(...parsed.positionals);\r\n\r\n  for (const cmd of selectedVersion.commands) {\r\n    // Prompt for missing positional args (placeholders like <host> or [host]).\r\n    const filledArgs: string[] = [];\r\n    const placeholders = cmd.args.filter((arg) => isPlaceholder(arg));\r\n    const defaults = cmd.args.filter((arg) => !isPlaceholder(arg));\r\n\r\n    for (const placeholder of placeholders) {\r\n      const label = placeholder.replace(/[\\[\\]<>]/g, \"\").trim() || \"value\";\r\n      const value = await input({\r\n        message: `What argument are you gonna send? (${label})`,\r\n      });\r\n      filledArgs.push(value);\r\n    }\r\n\r\n    filledArgs.unshift(...defaults);\r\n\r\n    // Prompt for known options that are missing in the CLI.\r\n    const cmdCliArgs = [...baseCliArgs];\r\n\r\n    if (cmd.options.length > 0) {\r\n      const hasProvided = cmd.options.some((option) =>\r\n        existingFlags.has(option),\r\n      );\r\n      if (!hasProvided) {\r\n        const primaryOption = cmd.options[0];\r\n        const value = await input({\r\n          message: `What do you want to use for \"${primaryOption}\" argument?`,\r\n          default: \"\",\r\n        });\r\n\r\n        if (value !== \"\") {\r\n          cmdCliArgs.push(primaryOption, value);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const cmd of selectedVersion.commands) {\r\n      const commandSpinner = ora({\r\n        text: `Executing command: ${cmd.name}...`,\r\n        spinner: {\r\n          frames: cliSpinners.circleHalves.frames,\r\n          interval: 80,\r\n        },\r\n      }).start();\r\n\r\n      try {\r\n        commandSpinner.stop();\r\n\r\n        // Merge JSON args with CLI args\r\n        const mergedArgs = [...filledArgs, ...cmdCliArgs];\r\n\r\n        console.log(`\\n$ ${cmd.action} ${mergedArgs.join(\" \")}\\n`);\r\n\r\n        await execa(cmd.action, mergedArgs, { stdio: \"inherit\" });\r\n\r\n        console.log();\r\n        commandSpinner.succeed(`Executed command: ${cmd.name}`);\r\n      } catch (error) {\r\n        commandSpinner.fail(`Failed to execute command: ${cmd.name}`);\r\n        if (error instanceof Error) {\r\n          console.error(`Error: ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function isPlaceholder(value: string) {\r\n    return /^<[^>]+>$/.test(value) || /^\\[[^\\]]+\\]$/.test(value);\r\n  }\r\n\r\n  function parseExtras(extras: string[], knownOptions: Set<string>) {\r\n    const flags: Array<{ flag: string; value: string | null }> = [];\r\n    const unknownTokens: string[] = [];\r\n    const positionals: string[] = [];\r\n\r\n    for (let i = 0; i < extras.length; i += 1) {\r\n      const token = extras[i];\r\n\r\n      if (token.startsWith(\"-\")) {\r\n        const next = extras[i + 1];\r\n        const hasValue = next !== undefined && !next.startsWith(\"-\");\r\n        const value = hasValue ? next : null;\r\n\r\n        if (knownOptions.has(token)) {\r\n          flags.push({ flag: token, value });\r\n        } else {\r\n          unknownTokens.push(token);\r\n          if (hasValue) {\r\n            unknownTokens.push(next);\r\n          }\r\n        }\r\n\r\n        if (hasValue) {\r\n          i += 1;\r\n        }\r\n\r\n        continue;\r\n      }\r\n\r\n      positionals.push(token);\r\n    }\r\n\r\n    return { flags, unknownTokens, positionals };\r\n  }\r\n}\r\n","#!/usr/bin/env node\r\n\r\nimport { Command } from \"commander\";\r\nimport { helloCommand } from \"./commands/hello\";\r\n\r\nimport packageJson from \"../package.json\";\r\nimport { executeCommand } from \"./commands/e\";\r\n\r\nprocess.on(\"SIGINT\", () => process.exit(0));\r\nprocess.on(\"SIGTERM\", () => process.exit(0));\r\n\r\nasync function main() {\r\n  const program = new Command()\r\n    .name(\"talos\")\r\n    .description(\"Manage everything.\")\r\n    .version(\r\n      packageJson.version || \"1.0.0\",\r\n      \"-v, --version\",\r\n      \"display the version number\",\r\n    )\r\n    .enablePositionalOptions();\r\n\r\n  program.addCommand(helloCommand);\r\n  program.addCommand(executeCommand);\r\n\r\n  program.parse();\r\n}\r\n\r\nmain();\r\n"]}