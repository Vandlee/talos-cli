{"version":3,"sources":["../src/commands/hello.ts","../package.json","../src/types/schema.ts","../src/utils/files.ts","../src/utils/isPlaceholder.ts","../src/utils/parseExtras.ts","../src/commands/e.ts","../src/index.ts"],"names":["helloCommand","Command","opts","helloHandler","options","package_default","CommandSchema","z","CommandBodySchema","RegistrySchema","findLocalCommandFile","name","folder","findFolder","filePath","path","raw","parsedCommand","error","findTalosFolder","homeDir","os","talosDir","folderName","folderPath","isPlaceholder","value","parseExtras","extras","knownOptions","flags","unknownTokens","positionals","token","next","hasValue","executeCommand","executeHandler","environment","select","findCommand","findLocalCommand","cliOptions","searchCommandSpinner","ora","cliSpinners","resolve","file","selectedVersion","cmd","baseCliArgs","parsed","existingFlags","item","filledArgs","placeholders","arg","defaults","placeholder","label","input","cmdCliArgs","option","primaryOption","commandSpinner","mergedArgs","execa","main","program"],"mappings":"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","file":"index.js","sourcesContent":["import { Command } from \"commander\";\r\n\r\nexport const helloCommand = new Command(\"hello\")\r\n  .description(\"Say hello to the user!\")\r\n  .option(\"-n, --name <name>\", \"Name to greet\", \"World\")\r\n  .action((opts) => helloHandler(opts));\r\n\r\nexport async function helloHandler(options: { name?: string }) {\r\n  console.log(`Hello, ${options.name}`);\r\n}\r\n","{\r\n  \"name\": \"@talos-org/cli\",\r\n  \"version\": \"0.1.17\",\r\n  \"description\": \"\",\r\n  \"publishConfig\": {\r\n    \"access\": \"public\"\r\n  },\r\n  \"license\": \"MIT\",\r\n  \"author\": {\r\n    \"name\": \"sergiocortes-dll\",\r\n    \"url\": \"https://x.com/sergiocortes-dll\"\r\n  },\r\n  \"files\": [\r\n    \"dist\"\r\n  ],\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"https://github.com/Vandlee/talos-cli.git\"\r\n  },\r\n  \"keywords\": [],\r\n  \"type\": \"module\",\r\n  \"exports\": {\r\n    \".\": {\r\n      \"types\": \"./dist/index.d.ts\",\r\n      \"default\": \"./dist/index.js\"\r\n    }\r\n  },\r\n  \"bin\": {\r\n    \"talos\": \"./dist/index.js\"\r\n  },\r\n  \"scripts\": {\r\n    \"talos\": \"pnpm start:dev\",\r\n    \"dev\": \"tsup --watch\",\r\n    \"build\": \"tsup\",\r\n    \"typecheck\": \"tsc --noEmit\",\r\n    \"start\": \"node dist/index.js\",\r\n    \"start:dev\": \"node dist/index.js\",\r\n    \"pub:beta\": \"pnpm build && pnpm publish --no-git-checks --access public --tag beta\",\r\n    \"pub:next\": \"pnpm build && pnpm publish --no-git-checks --access public --tag next\",\r\n    \"pub:release\": \"pnpm build && pnpm publish --access public\",\r\n    \"test\": \"vitest run\"\r\n  },\r\n  \"packageManager\": \"pnpm@10.28.2\",\r\n  \"dependencies\": {\r\n    \"@inquirer/prompts\": \"^8.2.0\",\r\n    \"chalk\": \"^5.6.2\",\r\n    \"cli-spinners\": \"^3.4.0\",\r\n    \"commander\": \"^14.0.3\",\r\n    \"dotenv\": \"^17.2.4\",\r\n    \"execa\": \"^9.6.1\",\r\n    \"ora\": \"^9.3.0\",\r\n    \"pino\": \"^10.3.0\",\r\n    \"vite-tsconfig-paths\": \"^6.0.5\",\r\n    \"zod\": \"^4.3.6\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@types/node\": \"^25.2.1\",\r\n    \"eslint\": \"^10.0.0\",\r\n    \"prettier\": \"^3.8.1\",\r\n    \"tsconfig-paths\": \"^4.2.0\",\r\n    \"tsup\": \"^8.5.1\",\r\n    \"tsx\": \"^4.21.0\",\r\n    \"typescript\": \"^5.9.3\",\r\n    \"vitest\": \"^4.0.18\"\r\n  }\r\n}\r\n","import z from \"zod\";\r\n\r\nexport const CommandSchema = z.object({\r\n  name: z.string(),\r\n  options: z.array(z.string()),\r\n  args: z.array(z.string()),\r\n  action: z.string(),\r\n});\r\n\r\nexport const CommandBodySchema = z.object({\r\n  label: z.string().optional(),\r\n  version: z.string(),\r\n  commands: z.array(CommandSchema),\r\n});\r\n\r\nexport const RegistrySchema = z.object({\r\n  name: z.string(),\r\n  body: z.array(CommandBodySchema),\r\n});\r\n\r\nexport type Command = z.infer<typeof CommandSchema>;\r\nexport type CommandBody = z.infer<typeof CommandBodySchema>;\r\nexport type registrySchema = z.infer<typeof RegistrySchema>;\r\n","import * as fs from \"fs/promises\";\r\nimport os from \"os\";\r\nimport path from \"path\";\r\nimport { z } from \"zod\";\r\nimport { RegistrySchema } from \"../types/schema\";\r\n\r\nexport async function findLocalCommandFile(\r\n  name: string,\r\n): Promise<z.infer<typeof RegistrySchema> | undefined> {\r\n  try {\r\n    const folder = await findFolder(\"commands\");\r\n    if (!folder) {\r\n      console.error(\"Commands folder not found.\");\r\n      return;\r\n    }\r\n    const filePath = path.join(folder, `${name}.json`);\r\n\r\n    const raw = await fs.readFile(filePath, \"utf-8\");\r\n    const parsedCommand = JSON.parse(raw);\r\n\r\n    return RegistrySchema.parse(parsedCommand);\r\n  } catch (error) {\r\n    console.error(`Error finding command file: ${error}`);\r\n    return;\r\n  }\r\n}\r\n\r\nexport async function findTalosFolder() {\r\n  const homeDir = os.homedir();\r\n  const talosDir = path.join(homeDir, \".talos\");\r\n\r\n  try {\r\n    await fs.access(talosDir);\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function findFolder(folderName: string) {\r\n  const homeDir = os.homedir();\r\n\r\n  if (await findTalosFolder()) {\r\n    try {\r\n      const folderPath = path.join(homeDir, \".talos\", folderName);\r\n      await fs.access(folderPath);\r\n      return folderPath;\r\n    } catch (error) {\r\n      console.error(`Error finding folder: ${error}`);\r\n      return;\r\n    }\r\n  }\r\n}\r\n","export function isPlaceholder(value: string) {\r\n  return /^<[^>]+>$/.test(value) || /^\\[[^\\]]+\\]$/.test(value);\r\n}\r\n","export function parseExtras(extras: string[], knownOptions: Set<string>) {\r\n  const flags: Array<{ flag: string; value: string | null }> = [];\r\n  const unknownTokens: string[] = [];\r\n  const positionals: string[] = [];\r\n\r\n  for (let i = 0; i < extras.length; i += 1) {\r\n    const token = extras[i];\r\n\r\n    if (token.startsWith(\"-\")) {\r\n      const next = extras[i + 1];\r\n      const hasValue = next !== undefined && !next.startsWith(\"-\");\r\n      const value = hasValue ? next : null;\r\n\r\n      if (knownOptions.has(token)) {\r\n        flags.push({ flag: token, value });\r\n      } else {\r\n        unknownTokens.push(token);\r\n        if (hasValue) {\r\n          unknownTokens.push(next);\r\n        }\r\n      }\r\n\r\n      if (hasValue) {\r\n        i += 1;\r\n      }\r\n\r\n      continue;\r\n    }\r\n\r\n    positionals.push(token);\r\n  }\r\n\r\n  return { flags, unknownTokens, positionals };\r\n}\r\n","import { input, select } from \"@inquirer/prompts\";\r\nimport cliSpinners from \"cli-spinners\";\r\nimport { Command } from \"commander\";\r\nimport { execa } from \"execa\";\r\nimport ora from \"ora\";\r\nimport { findLocalCommandFile } from \"../utils/files\";\r\nimport { isPlaceholder } from \"../utils/isPlaceholder\";\r\nimport { parseExtras } from \"../utils/parseExtras\";\r\n\r\nexport const executeCommand = new Command(\"e\")\r\n  .description(\"Execute a command\")\r\n  .argument(\"<name>\", \"Name of the command\")\r\n  .argument(\"[extras...]\", \"Additional arguments and options\")\r\n  .allowUnknownOption()\r\n  .passThroughOptions()\r\n  .action((name, extras, opts) => executeHandler(name, opts, extras));\r\n\r\nexport async function executeHandler(\r\n  name: string,\r\n  options: any,\r\n  extras?: string[],\r\n) {\r\n  const environment = await select({\r\n    message: \"Where does Talos need to look for the command?\",\r\n    choices: [\r\n      { name: \"Local\", value: \"local\" },\r\n      { name: \"Internet\", value: \"internet\" },\r\n    ],\r\n  });\r\n\r\n  await findCommand(name, environment, { ...options, extras });\r\n}\r\n\r\nasync function findCommand(name: string, environment: string, options: any) {\r\n  if (environment === \"local\") {\r\n    await findLocalCommand(name, options);\r\n  } else if (environment === \"internet\") {\r\n    console.log(`Looking for ${name} on the internet...`);\r\n    // Implement internet command lookup logic here\r\n  }\r\n}\r\n\r\nasync function findLocalCommand(name: string, cliOptions: any = {}) {\r\n  const searchCommandSpinner = ora({\r\n    text: \"Looking for command locally...\",\r\n    spinner: {\r\n      frames: cliSpinners.circleHalves.frames,\r\n      interval: 80,\r\n    },\r\n  }).start();\r\n\r\n  await new Promise((resolve) => setTimeout(resolve, 1000)); // Simulate async operation\r\n\r\n  try {\r\n    const file = await findLocalCommandFile(name);\r\n\r\n    if (!file) {\r\n      searchCommandSpinner.fail(\"Command not found locally.\");\r\n      return;\r\n    }\r\n\r\n    searchCommandSpinner.succeed(\"Command found locally.\");\r\n\r\n    if (file.body.length <= 0) {\r\n      searchCommandSpinner.fail(\"No versions found for this command.\");\r\n      return;\r\n    }\r\n\r\n    let selectedVersion = file.body[0]; // Default to the first version\r\n\r\n    if (file.body.length > 1) {\r\n      const version = await select({\r\n        message: \"Select a command version to execute:\",\r\n        choices: file.body.map((cmd) => ({\r\n          name: `${cmd.version}${cmd.label ? ` - ${cmd.label}` : \"\"}`,\r\n          value: cmd,\r\n        })),\r\n      });\r\n\r\n      selectedVersion = version || selectedVersion;\r\n    }\r\n\r\n    // Build CLI args from extras while prompting for missing values defined in the registry.\r\n    const baseCliArgs: string[] = [];\r\n    const extras = Array.isArray(cliOptions.extras) ? cliOptions.extras : [];\r\n\r\n    const knownOptions = new Set(\r\n      selectedVersion.commands.flatMap((cmd) => cmd.options),\r\n    );\r\n    const parsed = parseExtras(extras, knownOptions);\r\n\r\n    // Preserve provided flags, unknown flags, and positional args as-is.\r\n    const existingFlags = new Set(parsed.flags.map((item) => item.flag));\r\n    for (const item of parsed.flags) {\r\n      baseCliArgs.push(item.flag);\r\n      if (item.value !== null) {\r\n        baseCliArgs.push(item.value);\r\n      }\r\n    }\r\n    baseCliArgs.push(...parsed.unknownTokens);\r\n    baseCliArgs.push(...parsed.positionals);\r\n\r\n    for (const cmd of selectedVersion.commands) {\r\n      // Prompt for missing positional args (placeholders like <host> or [host]).\r\n      const filledArgs: string[] = [];\r\n      const placeholders = cmd.args.filter((arg) => isPlaceholder(arg));\r\n      const defaults = cmd.args.filter((arg) => !isPlaceholder(arg));\r\n\r\n      for (const placeholder of placeholders) {\r\n        const label = placeholder.replace(/[\\[\\]<>]/g, \"\").trim() || \"value\";\r\n        const value = await input({\r\n          message: `What argument are you gonna send? (${label})`,\r\n        });\r\n        filledArgs.push(value);\r\n      }\r\n\r\n      filledArgs.unshift(...defaults);\r\n\r\n      // Prompt for known options that are missing in the CLI.\r\n      const cmdCliArgs = [...baseCliArgs];\r\n\r\n      if (cmd.options.length > 0) {\r\n        const hasProvided = cmd.options.some((option) =>\r\n          existingFlags.has(option),\r\n        );\r\n        if (!hasProvided) {\r\n          const primaryOption = cmd.options[0];\r\n          const value = await input({\r\n            message: `What do you want to use for \"${primaryOption}\" argument?`,\r\n            default: \"\",\r\n          });\r\n\r\n          if (value !== \"\") {\r\n            cmdCliArgs.push(primaryOption, value);\r\n          }\r\n        }\r\n      }\r\n\r\n      for (const cmd of selectedVersion.commands) {\r\n        const commandSpinner = ora({\r\n          text: `Executing command: ${cmd.name}...`,\r\n          spinner: {\r\n            frames: cliSpinners.circleHalves.frames,\r\n            interval: 80,\r\n          },\r\n        }).start();\r\n\r\n        try {\r\n          commandSpinner.stop();\r\n\r\n          // Merge JSON args with CLI args\r\n          const mergedArgs = [...filledArgs, ...cmdCliArgs];\r\n\r\n          console.log(`\\n$ ${cmd.action} ${mergedArgs.join(\" \")}\\n`);\r\n\r\n          await execa(cmd.action, mergedArgs, { stdio: \"inherit\" });\r\n\r\n          console.log();\r\n          commandSpinner.succeed(`Executed command: ${cmd.name}`);\r\n        } catch (error) {\r\n          commandSpinner.fail(`Failed to execute command: ${cmd.name}`);\r\n          if (error instanceof Error) {\r\n            console.error(`Error: ${error.message}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {}\r\n}\r\n","#!/usr/bin/env node\r\n\r\nimport { Command } from \"commander\";\r\nimport { helloCommand } from \"./commands/hello\";\r\n\r\nimport packageJson from \"../package.json\";\r\nimport { executeCommand } from \"./commands/e\";\r\n\r\nprocess.on(\"SIGINT\", () => process.exit(0));\r\nprocess.on(\"SIGTERM\", () => process.exit(0));\r\n\r\nasync function main() {\r\n  const program = new Command()\r\n    .name(\"talos\")\r\n    .description(\"Manage everything.\")\r\n    .version(\r\n      packageJson.version || \"1.0.0\",\r\n      \"-v, --version\",\r\n      \"display the version number\",\r\n    )\r\n    .enablePositionalOptions();\r\n\r\n  program.addCommand(helloCommand);\r\n  program.addCommand(executeCommand);\r\n\r\n  program.parse();\r\n}\r\n\r\nmain();\r\n"]}